import{d as N,F as v,c as P,h as G,I as K,a as X,e as z,S as V,b as k}from"./highlight-aGWIcb49.js";const B="ingr-preferred-output-format",W={ingr:".ingr",json:".json",jsonl:".jsonl",csv:".csv",tsv:".tsv",yaml:".yaml",xml:".xml",markdown:".md"};function Y(){const y=document.getElementById("input-area"),f=document.getElementById("output-area"),O=document.getElementById("input-tabs"),h=document.getElementById("output-tabs"),R=document.getElementById("output-tabs-wrapper"),w=document.getElementById("output-tabs-spacer"),M=document.getElementById("convert-btn"),U=document.getElementById("clear-btn"),r=document.getElementById("copy-btn"),A=document.getElementById("download-btn"),c=document.getElementById("detect-status"),C=document.getElementById("output-format-label"),d=document.getElementById("output-stats"),s=document.getElementById("drop-zone"),E=document.getElementById("drop-overlay"),g=document.getElementById("file-input"),j=document.getElementById("delimiter-label"),F=document.getElementById("output-delimiter");let i=null,o=localStorage.getItem(B)??"ingr",u="";function l(t,e=!1){u=e?"":t,f.classList.toggle("error",e),e?f.textContent=t:t&&S()==="ingr"?f.innerHTML=G(t):f.textContent=t}function L(){O.innerHTML=K.map(t=>`<button class="format-tab${t===i?" active":""}" data-fmt="${t}">${v[t]}</button>`).join("")}function b(){const t=i==="ingr";R.style.display=t?"block":"none",w.style.display=t?"none":"block",t&&(h.innerHTML=X.map(e=>`<button class="format-tab${e===o?" active":""}" data-fmt="${e}">${v[e]}</button>`).join(""))}function T(t,e=!1){i=t,L(),t&&t!=="ingr"&&(o=localStorage.getItem(B)??k(t)),b(),m(),I(),e&&p()}function _(t){o=t,localStorage.setItem(B,t),b(),m(),I(),p()}function S(){return i==="ingr"?o:"ingr"}function I(){j.style.display=S()==="ingr"?"flex":"none"}function m(){o?C.textContent=`● ${v[o]??o}`:C.textContent=""}function p(){const t=y.value.trim();if(!t){l(""),d.textContent="";return}let e=i;if(!e)if(e=N(t),e)T(e),c.textContent=`Detected: ${v[e]}`;else{l(`Format not recognised.

Please choose the input format manually using the tabs above the input area.`,!0),c.textContent="",d.textContent="";return}const a=e==="ingr"?o:k(e);try{const n={ingrDelimiter:F.checked},x=P(t,e,a,n);l(x);const D=x.split(`
`).length,H=new TextEncoder().encode(x).length;d.textContent=`${D} lines · ${(H/1024).toFixed(1)} KB`,m()}catch(n){l(n instanceof Error?n.message:String(n),!0),d.textContent=""}}O.addEventListener("click",t=>{const e=t.target.closest(".format-tab");e?.dataset.fmt&&(T(e.dataset.fmt),c.textContent="")}),h.addEventListener("click",t=>{const e=t.target.closest(".format-tab");e?.dataset.fmt&&_(e.dataset.fmt)}),M.addEventListener("click",()=>{c.textContent="",p()}),U.addEventListener("click",()=>{y.value="",l(""),i=null,c.textContent="",d.textContent="",L(),b(),m()}),r.addEventListener("click",async()=>{if(!u)return;await navigator.clipboard.writeText(u);const t=r.innerHTML;r.innerHTML="<span>✓</span> Copied",r.classList.add("flash-success"),setTimeout(()=>{r.innerHTML=t,r.classList.remove("flash-success")},1500)}),A.addEventListener("click",()=>{if(!u)return;const t=W[o]??".txt",e=new Blob([u],{type:"text/plain;charset=utf-8"}),a=URL.createObjectURL(e),n=document.createElement("a");n.href=a,n.download=`converted${t}`,n.click(),URL.revokeObjectURL(a)});function $(t){const e=t.name.split(".").pop()??"",a=z(e);if(!a){l(`Unsupported file type ".${e}".

Supported file extensions: ${V.join(", ")}`,!0);return}const n=new FileReader;n.onload=()=>{y.value=n.result,T(a),c.textContent=`Loaded: ${t.name}`,p()},n.readAsText(t)}g.addEventListener("change",()=>{g.files?.[0]&&$(g.files[0]),g.value=""}),s.addEventListener("dragover",t=>{t.preventDefault(),s.classList.add("drag-over"),E.style.display="flex"}),s.addEventListener("dragleave",t=>{s.contains(t.relatedTarget)||(s.classList.remove("drag-over"),E.style.display="none")}),s.addEventListener("drop",t=>{t.preventDefault(),s.classList.remove("drag-over"),E.style.display="none";const e=t.dataTransfer?.files[0];e&&$(e)}),F.addEventListener("change",p),L(),b(),m(),I()}document.addEventListener("DOMContentLoaded",Y);
