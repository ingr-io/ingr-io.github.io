import{d as K,F as b,c as X,h as z,I as W,a as Y,e as Z,S as q,b as k}from"./highlight-D4nBylv2.js";const I="ingr-preferred-output-format",J={ingr:".ingr",json:".json",jsonl:".jsonl",csv:".csv",tsv:".tsv",yaml:".yaml",xml:".xml",markdown:".md"};function Q(){const E=document.getElementById("input-area"),g=document.getElementById("output-area"),x=document.getElementById("input-tabs"),B=document.getElementById("output-tabs"),w=document.getElementById("output-tabs-wrapper"),A=document.getElementById("output-tabs-spacer"),$=document.getElementById("convert-btn"),R=document.getElementById("clear-btn"),r=document.getElementById("copy-btn"),M=document.getElementById("download-btn"),c=document.getElementById("detect-status"),O=document.getElementById("output-format-label"),m=document.getElementById("output-stats"),s=document.getElementById("drop-zone"),h=document.getElementById("drop-overlay"),y=document.getElementById("file-input"),S=document.getElementById("output-delimiter"),C=document.getElementById("output-sha256");let d=null,o=localStorage.getItem(I)??"ingr",p="";function i(t,e=!1){p=e?"":t,g.classList.toggle("error",e),e?g.textContent=t:t&&j()==="ingr"?g.innerHTML=z(t):g.textContent=t}function L(){x.innerHTML=W.map(t=>`<button class="format-tab${t===d?" active":""}" data-fmt="${t}">${b[t]}</button>`).join("")}function v(){const t=d==="ingr";w.style.display=t?"block":"none",A.style.display=t?"none":"block",t&&(B.innerHTML=Y.map(e=>`<button class="format-tab${e===o?" active":""}" data-fmt="${e}">${b[e]}</button>`).join(""))}function T(t,e=!1){d=t,L(),t&&t!=="ingr"&&(o=localStorage.getItem(I)??k(t)),v(),f(),e&&l()}function U(t){o=t,localStorage.setItem(I,t),v(),f(),l()}function j(){return d==="ingr"?o:"ingr"}function f(){o?O.textContent=`● ${b[o]??o}`:O.textContent=""}async function l(){const t=E.value.trim();if(!t){i(""),m.textContent="";return}let e=d;if(!e)if(e=K(t),e)T(e),c.textContent=`Detected: ${b[e]}`;else{i(`Format not recognised.

Please choose the input format manually using the tabs above the input area.`,!0),c.textContent="",m.textContent="";return}const a=e==="ingr"?o:k(e);try{const n={ingrDelimiter:S.checked};let u=X(t,e,a,n);if(C.checked&&a==="ingr"){const D=new TextEncoder().encode(u),N=await crypto.subtle.digest("SHA-256",D),P=Array.from(new Uint8Array(N)).map(G=>G.toString(16).padStart(2,"0")).join("");u=u+`
# sha256:`+P}i(u);const _=u.split(`
`).length,H=new TextEncoder().encode(u).length;m.textContent=`${_} lines · ${(H/1024).toFixed(1)} KB`,f()}catch(n){i(n instanceof Error?n.message:String(n),!0),m.textContent=""}}x.addEventListener("click",t=>{const e=t.target.closest(".format-tab");e?.dataset.fmt&&(T(e.dataset.fmt),c.textContent="")}),B.addEventListener("click",t=>{const e=t.target.closest(".format-tab");e?.dataset.fmt&&U(e.dataset.fmt)}),$.addEventListener("click",()=>{c.textContent="",l()}),R.addEventListener("click",()=>{E.value="",i(""),d=null,c.textContent="",m.textContent="",L(),v(),f()}),r.addEventListener("click",async()=>{if(!p)return;await navigator.clipboard.writeText(p);const t=r.innerHTML;r.innerHTML="<span>✓</span> Copied",r.classList.add("flash-success"),setTimeout(()=>{r.innerHTML=t,r.classList.remove("flash-success")},1500)}),M.addEventListener("click",()=>{if(!p)return;const t=J[o]??".txt",e=new Blob([p],{type:"text/plain;charset=utf-8"}),a=URL.createObjectURL(e),n=document.createElement("a");n.href=a,n.download=`converted${t}`,n.click(),URL.revokeObjectURL(a)});function F(t){const e=t.name.split(".").pop()??"",a=Z(e);if(!a){i(`Unsupported file type ".${e}".

Supported file extensions: ${q.join(", ")}`,!0);return}const n=new FileReader;n.onload=()=>{E.value=n.result,T(a),c.textContent=`Loaded: ${t.name}`,l()},n.readAsText(t)}y.addEventListener("change",()=>{y.files?.[0]&&F(y.files[0]),y.value=""}),s.addEventListener("dragover",t=>{t.preventDefault(),s.classList.add("drag-over"),h.style.display="flex"}),s.addEventListener("dragleave",t=>{s.contains(t.relatedTarget)||(s.classList.remove("drag-over"),h.style.display="none")}),s.addEventListener("drop",t=>{t.preventDefault(),s.classList.remove("drag-over"),h.style.display="none";const e=t.dataTransfer?.files[0];e&&F(e)}),S.addEventListener("change",l),C.addEventListener("change",l),L(),v(),f()}document.addEventListener("DOMContentLoaded",Q);
