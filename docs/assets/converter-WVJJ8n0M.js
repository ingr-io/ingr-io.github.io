import{d as Y,F as x,c as Z,h as q,I as J,a as Q,e as V,S as tt,b as _}from"./highlight-CDUcPZ9v.js";const F="ingr-preferred-output-format",et={ingr:".ingr",json:".json",jsonl:".jsonl",csv:".csv",tsv:".tsv",yaml:".yaml",xml:".xml",markdown:".md"};function H(r){if(r===0)return"0 bytes";const s=Math.abs(r),c=[],g=Math.floor(s/(1024*1024)),v=Math.floor(s%(1024*1024)/1024),E=Math.floor(s%1024);return g>0&&c.push(`${g}MB`),v>0&&c.push(`${v}KB`),E>0&&c.push(`${E}bytes`),c.join(" ")}function nt(){const r=document.getElementById("input-area"),s=document.getElementById("output-area"),c=document.getElementById("input-tabs"),g=document.getElementById("output-tabs"),v=document.getElementById("output-tabs-wrapper"),E=document.getElementById("output-tabs-spacer"),D=document.getElementById("convert-btn"),N=document.getElementById("clear-btn"),d=document.getElementById("copy-btn"),P=document.getElementById("download-btn"),l=document.getElementById("detect-status"),k=document.getElementById("output-format-label"),b=document.getElementById("output-stats"),i=document.getElementById("drop-zone"),O=document.getElementById("drop-overlay"),L=document.getElementById("file-input"),w=document.getElementById("output-delimiter"),A=document.getElementById("output-sha256");let u=null,o=localStorage.getItem(F)??"ingr",y="";function p(t,e=!1){y=e?"":t,s.classList.toggle("error",e),e?s.textContent=t:t&&G()==="ingr"?s.innerHTML=q(t):s.textContent=t}function S(){c.innerHTML=J.map(t=>`<button class="format-tab${t===u?" active":""}" data-fmt="${t}">${x[t]}</button>`).join("")}function T(){const t=u==="ingr";v.style.display=t?"block":"none",E.style.display=t?"none":"block",t&&(g.innerHTML=Q.map(e=>`<button class="format-tab${e===o?" active":""}" data-fmt="${e}">${x[e]}</button>`).join(""))}function $(t,e=!1){u=t,S(),t&&t!=="ingr"&&(o=localStorage.getItem(F)??_(t)),T(),h(),e&&m()}function z(t){o=t,localStorage.setItem(F,t),T(),h(),m()}function G(){return u==="ingr"?o:"ingr"}function h(){o?k.textContent=`● ${x[o]??o}`:k.textContent=""}async function m(){const t=r.value.trim();if(!t){p(""),b.textContent="";return}let e=u;if(!e)if(e=Y(t),e)$(e),l.textContent=`Detected: ${x[e]}`;else{p(`Format not recognised.

Please choose the input format manually using the tabs above the input area.`,!0),l.textContent="",b.textContent="";return}const a=e==="ingr"?o:_(e);try{const n={ingrDelimiter:w.checked};let f=Z(t,e,a,n);if(A.checked&&a==="ingr"){const M=new TextEncoder().encode(f),B=await crypto.subtle.digest("SHA-256",M),X=Array.from(new Uint8Array(B)).map(W=>W.toString(16).padStart(2,"0")).join("");f=f+`
# sha256:`+X}p(f);const K=f.split(`
`).length,U=new TextEncoder().encode(f).length,C=new TextEncoder().encode(r.value).length;let j=`${K} lines · ${H(U)}`;if(C>0){const I=U-C,M=Math.round(I/C*100),B=I<0?"−":"+";j+=` · ${B}${Math.abs(M)}% (${B}${H(Math.abs(I))})`}b.textContent=j,h()}catch(n){p(n instanceof Error?n.message:String(n),!0),b.textContent=""}}c.addEventListener("click",t=>{const e=t.target.closest(".format-tab");e?.dataset.fmt&&($(e.dataset.fmt),l.textContent="")}),g.addEventListener("click",t=>{const e=t.target.closest(".format-tab");e?.dataset.fmt&&z(e.dataset.fmt)}),D.addEventListener("click",()=>{l.textContent="",m()}),N.addEventListener("click",()=>{r.value="",p(""),u=null,l.textContent="",b.textContent="",S(),T(),h()}),d.addEventListener("click",async()=>{if(!y)return;await navigator.clipboard.writeText(y);const t=d.innerHTML;d.innerHTML="<span>✓</span> Copied",d.classList.add("flash-success"),setTimeout(()=>{d.innerHTML=t,d.classList.remove("flash-success")},1500)}),P.addEventListener("click",()=>{if(!y)return;const t=et[o]??".txt",e=new Blob([y],{type:"text/plain;charset=utf-8"}),a=URL.createObjectURL(e),n=document.createElement("a");n.href=a,n.download=`converted${t}`,n.click(),URL.revokeObjectURL(a)});function R(t){const e=t.name.split(".").pop()??"",a=V(e);if(!a){p(`Unsupported file type ".${e}".

Supported file extensions: ${tt.join(", ")}`,!0);return}const n=new FileReader;n.onload=()=>{r.value=n.result,$(a),l.textContent=`Loaded: ${t.name}`,m()},n.readAsText(t)}L.addEventListener("change",()=>{L.files?.[0]&&R(L.files[0]),L.value=""}),i.addEventListener("dragover",t=>{t.preventDefault(),i.classList.add("drag-over"),O.style.display="flex"}),i.addEventListener("dragleave",t=>{i.contains(t.relatedTarget)||(i.classList.remove("drag-over"),O.style.display="none")}),i.addEventListener("drop",t=>{t.preventDefault(),i.classList.remove("drag-over"),O.style.display="none";const e=t.dataTransfer?.files[0];e&&R(e)}),w.addEventListener("change",m),A.addEventListener("change",m),S(),T(),h()}document.addEventListener("DOMContentLoaded",nt);
