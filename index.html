<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>INGR — Compact Git-Friendly Record Format</title>
  <meta name="description" content="INGR is a compact, deterministic, self-describing, Git-friendly fixed-line record format for structured data." />
  <script type="module" src="/src/home.ts"></script>
</head>
<body style="position:relative;z-index:1;">

<!-- ── HEADER ──────────────────────────────────────────────────────────────── -->
<header style="border-bottom:1px solid var(--border);padding:0 32px;display:flex;align-items:center;justify-content:space-between;height:56px;position:sticky;top:0;background:color-mix(in srgb,var(--bg) 90%,transparent);backdrop-filter:blur(12px);z-index:50;">
  <span style="font-family:var(--font-mono);font-size:18px;font-weight:600;color:var(--accent);letter-spacing:-0.02em;">INGR</span>
  <nav style="display:flex;gap:24px;align-items:center;">
    <a href="https://github.com/ingr-io/ingr-file-format" target="_blank" rel="noopener"
       style="font-family:var(--font-mono);font-size:11px;text-transform:uppercase;letter-spacing:0.06em;color:var(--text-muted);text-decoration:none;transition:color 0.15s;"
       onmouseover="this.style.color='var(--text)'" onmouseout="this.style.color='var(--text-muted)'">GitHub</a>
    <a href="/converter/"
       style="font-family:var(--font-mono);font-size:11px;text-transform:uppercase;letter-spacing:0.06em;padding:6px 14px;border:1px solid var(--border);color:var(--text-muted);text-decoration:none;transition:all 0.15s;"
       onmouseover="this.style.borderColor='var(--accent)';this.style.color='var(--accent)'"
       onmouseout="this.style.borderColor='var(--border)';this.style.color='var(--text-muted)'">Converter →</a>
  </nav>
</header>

<!-- ── HERO ────────────────────────────────────────────────────────────────── -->
<section style="padding:80px 32px 0;max-width:1100px;margin:0 auto;">
  <div class="animate-fade-up" style="margin-bottom:16px;">
    <span style="font-family:var(--font-mono);font-size:11px;text-transform:uppercase;letter-spacing:0.12em;color:var(--accent);border:1px solid var(--accent-dim);padding:4px 10px;">v1.0.0-RC</span>
  </div>
  <h1 class="animate-fade-up delay-1"
      style="font-family:var(--font-display);font-size:clamp(28px,4vw,48px);font-weight:700;line-height:1.15;letter-spacing:-0.01em;color:var(--text);margin:0 0 24px;max-width:800px;">
    The record format built for<br/>
    <span style="color:var(--accent);">large datasets in Git.</span>
  </h1>
  <p class="animate-fade-up delay-2"
     style="font-size:18px;line-height:1.6;color:var(--text-muted);max-width:560px;margin:0 0 48px;">
    INGR is a compact, deterministic, self-describing fixed-line record format.
    One field per line. Every diff meaningful. Every merge clean.
    <a href="https://github.com/ingr-io/ingr-file-format" target="_blank" rel="noopener"
       style="color:var(--accent);text-decoration:none;border-bottom:1px solid var(--accent-dim);transition:border-color 0.15s;"
       onmouseover="this.style.borderBottomColor='var(--accent)'"
       onmouseout="this.style.borderBottomColor='var(--accent-dim)'">Full specification ↗</a>
  </p>

  <!-- Mini converter -->
  <div class="animate-fade-up delay-3" id="hero-grid"
       style="display:grid;grid-template-columns:1fr auto 1fr;gap:0;border:1px solid var(--border);">

    <!-- Input -->
    <div>
      <div style="background:var(--surface-2);padding:10px 14px;border-bottom:1px solid var(--border);display:flex;align-items:center;">
        <span style="font-family:var(--font-mono);font-size:10px;text-transform:uppercase;letter-spacing:0.1em;color:var(--text-muted);">Input</span>
      </div>
      <div id="hero-tabs" class="format-tabs" style="background:var(--surface);"></div>
      <textarea id="hero-input" class="code-area" rows="12"
        style="border:none;width:100%;display:block;"
        placeholder="Paste your data here…"></textarea>
    </div>

    <!-- Center controls -->
    <div style="display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;padding:20px 16px;background:var(--surface);border-left:1px solid var(--border);border-right:1px solid var(--border);">
      <button id="hero-convert" class="btn-primary hero-convert-btn"
        style="display:flex;flex-direction:column;align-items:center;padding:16px 10px;letter-spacing:0.12em;line-height:1.4;">
        <span class="arrow-desktop" style="font-size:13px;">⇒</span>
        <span class="btn-text-vertical">C</span><span class="btn-text-vertical">O</span><span class="btn-text-vertical">N</span><span class="btn-text-vertical">V</span><span class="btn-text-vertical">E</span><span class="btn-text-vertical">R</span><span class="btn-text-vertical">T</span>
        <span class="arrow-desktop" style="font-size:13px;">⇒</span>
        <span class="btn-mobile" style="font-size:13px;">⇓</span>
        <span class="btn-text-mobile">CONVERT</span>
        <span class="btn-mobile" style="font-size:13px;">⇓</span>
      </button>
      <button id="hero-swap" class="btn-ghost hero-swap-btn"
        style="display:flex;flex-direction:column;align-items:center;padding:12px 8px;font-size:11px;line-height:1.5;">
        <span class="arrow-desktop" style="font-size:13px;">⇐</span>
        <span class="btn-text-vertical">S</span><span class="btn-text-vertical">W</span><span class="btn-text-vertical">A</span><span class="btn-text-vertical">P</span>
        <span class="arrow-desktop" style="font-size:13px;">⇒</span>
        <span class="btn-mobile" style="font-size:13px;">⇑</span>
        <span class="btn-text-mobile">SWAP</span>
        <span class="btn-mobile" style="font-size:13px;">⇓</span>
      </button>
    </div>

    <!-- Output -->
    <div>
      <div style="background:var(--surface-2);padding:10px 14px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;">
        <span style="font-family:var(--font-mono);font-size:10px;color:var(--text-muted);">.ingr output</span>
        <div style="display:flex;align-items:center;gap:12px;">
          <label style="display:flex;align-items:center;gap:6px;cursor:pointer;">
            <input id="hero-delimiter" type="checkbox"
              style="accent-color:var(--accent);width:12px;height:12px;cursor:pointer;" />
            <span style="font-family:var(--font-mono);font-size:10px;color:var(--text-muted);">Record delimiters</span>
          </label>
          <label style="display:flex;align-items:center;gap:6px;cursor:pointer;">
            <input id="hero-sha256" type="checkbox"
              style="accent-color:var(--accent);width:12px;height:12px;cursor:pointer;" />
            <span style="font-family:var(--font-mono);font-size:10px;color:var(--text-muted);">sha256</span>
          </label>
        </div>
      </div>
      <!-- spacer to align with input tabs row -->
      <div style="height:37px;background:var(--surface);border-bottom:1px solid var(--border);"></div>
      <pre id="hero-output" class="code-area code-output"
        style="border:none;width:100%;height:228px;"
        data-placeholder="Converted INGR will appear here…"></pre>
    </div>
  </div>

  <div id="hero-size-info" style="display:none;margin-top:12px;padding:12px 16px;background:var(--surface-2);border:1px solid var(--border);border-radius:4px;font-family:var(--font-mono);font-size:11px;color:var(--text-muted);">
    <span id="hero-size-change"></span>
  </div>

  <div class="animate-fade-up delay-4"
       style="display:flex;align-items:center;justify-content:space-between;margin-top:16px;flex-wrap:wrap;gap:8px;">
    <p style="font-family:var(--font-mono);font-size:11px;color:var(--text-muted);margin:0;">
      JSON · JSONL · CSV · TSV · YAML · XML → INGR
    </p>
    <a href="/converter/"
       style="font-family:var(--font-mono);font-size:11px;text-transform:uppercase;letter-spacing:0.06em;color:var(--accent);text-decoration:none;border-bottom:1px solid var(--accent-dim);transition:border-color 0.15s;"
       onmouseover="this.style.borderBottomColor='var(--accent)'"
       onmouseout="this.style.borderBottomColor='var(--accent-dim)'">Full converter →</a>
  </div>
</section>

<style>
@media (max-width:680px) {
  #hero-grid { grid-template-columns:1fr !important; }
  #hero-grid > div:nth-child(2) {
    flex-direction:row !important;
    border-left:none !important; border-right:none !important;
    border-top:1px solid var(--border); border-bottom:1px solid var(--border);
  }
  #hero-grid > div:nth-child(2) button {
    writing-mode:horizontal-tb !important;
    transform:none !important;
  }
}
</style>

<!-- ── FEATURES ────────────────────────────────────────────────────────────── -->
<section style="padding:96px 32px;max-width:1100px;margin:0 auto;" class="what-it-is-section">
  <div style="display:grid;grid-template-columns:1fr 2px 2fr;gap:48px;align-items:start;margin-bottom:80px;" class="what-it-is-grid">
    <div>
      <p style="font-family:var(--font-mono);font-size:10px;text-transform:uppercase;letter-spacing:0.14em;color:var(--accent);margin:0 0 16px;">What it is</p>
      <h2 style="font-family:var(--font-display);font-size:36px;font-weight:700;line-height:1.15;color:var(--text);margin:0;">
        Structured data,<br/>line by line.
      </h2>
    </div>
    <div style="background:var(--border);align-self:stretch;"></div>
    <div style="padding-top:8px;">
      <p style="font-size:16px;line-height:1.75;color:var(--text-muted);margin:0 0 20px;">
        Each INGR file starts with a single header declaring the dataset name and column list.
        Every record then occupies exactly <strong style="color:var(--text);font-weight:600;">N lines</strong> — one JSON-encoded value per field.
        No separators required. No ambiguity. No surprises.
      </p>
      <p style="font-size:16px;line-height:1.75;color:var(--text-muted);margin:0;">
        Because each field lives on its own line, Git sees exactly which values changed in every commit —
        not a blob of JSON noise. Merge conflicts are rare, and when they happen, they're trivial to resolve.
      </p>
    </div>
  </div>

  <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1px;background:var(--border);">
    <div class="feature-card">
      <div style="font-family:var(--font-mono);font-size:24px;color:var(--accent);margin-bottom:16px;">01</div>
      <h3 style="font-family:var(--font-display);font-size:20px;font-weight:700;color:var(--text);margin:0 0 10px;">Self-describing</h3>
      <p style="font-size:14px;line-height:1.65;color:var(--text-muted);margin:0;">
        The header encodes the recordset name and every column. No schema file needed.
      </p>
    </div>
    <div class="feature-card">
      <div style="font-family:var(--font-mono);font-size:24px;color:var(--accent);margin-bottom:16px;">02</div>
      <h3 style="font-family:var(--font-display);font-size:20px;font-weight:700;color:var(--text);margin:0 0 10px;">Deterministic</h3>
      <p style="font-size:14px;line-height:1.65;color:var(--text-muted);margin:0;">
        Fixed column order and JSON encoding rules mean identical data always produces identical bytes.
      </p>
    </div>
    <div class="feature-card">
      <div style="font-family:var(--font-mono);font-size:24px;color:var(--accent);margin-bottom:16px;">03</div>
      <h3 style="font-family:var(--font-display);font-size:20px;font-weight:700;color:var(--text);margin:0 0 10px;">Git-native</h3>
      <p style="font-size:14px;line-height:1.65;color:var(--text-muted);margin:0;">
        One field per line means diffs are surgical. Cherry-picks and rebases work cleanly.
      </p>
    </div>
    <div class="feature-card">
      <div style="font-family:var(--font-mono);font-size:24px;color:var(--accent);margin-bottom:16px;">04</div>
      <h3 style="font-family:var(--font-display);font-size:20px;font-weight:700;color:var(--text);margin:0 0 10px;">JSON-typed</h3>
      <p style="font-size:14px;line-height:1.65;color:var(--text-muted);margin:0;">
        All values are single-line JSON: strings, numbers, booleans, null, objects, arrays.
      </p>
    </div>
  </div>
</section>

<!-- ── SYNTAX EXAMPLE ──────────────────────────────────────────────────────── -->
<section style="background:var(--surface);border-top:1px solid var(--border);border-bottom:1px solid var(--border);padding:80px 32px;">
  <div style="max-width:1100px;margin:0 auto;display:grid;grid-template-columns:1fr 1fr;gap:64px;align-items:center;">
    <div>
      <p style="font-family:var(--font-mono);font-size:10px;text-transform:uppercase;letter-spacing:0.14em;color:var(--accent);margin:0 0 16px;">Format anatomy</p>
      <h2 style="font-family:var(--font-display);font-size:36px;font-weight:700;line-height:1.2;color:var(--text);margin:0 0 24px;">
        Readable by humans.<br/>Trivial to parse.
      </h2>
      <ul style="list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:16px;">
        <li style="display:flex;gap:16px;align-items:flex-start;">
          <span style="font-family:var(--font-mono);font-size:11px;color:var(--accent);background:var(--accent-dim);padding:2px 8px;flex-shrink:0;margin-top:2px;">HEADER</span>
          <span style="font-size:14px;line-height:1.6;color:var(--text-muted);">One line. Declares the recordset name and columns with <code style="font-family:var(--font-mono);color:var(--accent);">$ID</code> as the primary key.</span>
        </li>
        <li style="display:flex;gap:16px;align-items:flex-start;">
          <span style="font-family:var(--font-mono);font-size:11px;color:var(--teal);background:var(--teal-dim);padding:2px 8px;flex-shrink:0;margin-top:2px;">RECORDS</span>
          <span style="font-size:14px;line-height:1.6;color:var(--text-muted);">N lines per record, one JSON value each. Optional <code style="font-family:var(--font-mono);color:var(--text-subtle);">#</code> delimiter lines between records.</span>
        </li>
        <li style="display:flex;gap:16px;align-items:flex-start;">
          <span style="font-family:var(--font-mono);font-size:11px;color:var(--text-muted);background:var(--surface-2);padding:2px 8px;flex-shrink:0;margin-top:2px;">FOOTER</span>
          <span style="font-size:14px;line-height:1.6;color:var(--text-muted);">Record count for validation. Optional digest lines.</span>
        </li>
      </ul>
    </div>
    <div>
      <div class="code-block">
<span class="comment"># INGR.io | people: $ID, name, age</span>
<span class="string">"john"</span>
<span class="string">"John Doe"</span>
<span class="number">35</span>
<span class="string">"jane"</span>
<span class="string">"Jane Smith"</span>
<span class="number">29</span>
<span class="string">"carol"</span>
<span class="string">"Carol Wu"</span>
<span class="number">31</span>
<span class="comment"># 3 records</span></div>
      <p style="font-family:var(--font-mono);font-size:11px;color:var(--text-muted);margin-top:12px;">
        3 columns × 3 records = 9 data lines + 1 header + 1 footer
      </p>
    </div>
  </div>
</section>

<!-- ── GIT DIFF SHOWCASE ───────────────────────────────────────────────────── -->
<section style="padding:80px 32px;max-width:1100px;margin:0 auto;">
  <p style="font-family:var(--font-mono);font-size:10px;text-transform:uppercase;letter-spacing:0.14em;color:var(--accent);margin:0 0 16px;">Why it matters</p>
  <h2 style="font-family:var(--font-display);font-size:36px;font-weight:700;line-height:1.2;color:var(--text);margin:0 0 48px;max-width:600px;">
    Every change is exactly one changed line.
  </h2>
  <div style="display:grid;grid-template-columns:1fr 1fr;gap:32px;">
    <div>
      <p style="font-family:var(--font-mono);font-size:10px;text-transform:uppercase;letter-spacing:0.1em;color:var(--error);margin:0 0 10px;">JSON diff (noisy)</p>
      <div class="code-block" style="border-left-color:var(--error);font-size:12px;"><span style="color:var(--text-muted);">  {</span>
<span style="color:var(--text-muted);">    "name": "John Doe",</span>
<span style="color:var(--error);">-   "age": 35,</span>
<span style="color:var(--success);">+   "age": 36,</span>
<span style="color:var(--text-muted);">    "role": "engineer"</span>
<span style="color:var(--text-muted);">  },</span></div>
    </div>
    <div>
      <p style="font-family:var(--font-mono);font-size:10px;text-transform:uppercase;letter-spacing:0.1em;color:var(--success);margin:0 0 10px;">INGR diff (surgical)</p>
      <div class="code-block" style="border-left-color:var(--success);font-size:12px;"><span style="color:var(--text-muted);">  "John Doe"</span>
<span style="color:var(--error);">- 35</span>
<span style="color:var(--success);">+ 36</span>
<span style="color:var(--text-muted);">  "engineer"</span></div>
    </div>
  </div>
</section>

<!-- ── CONVERTER CTA ───────────────────────────────────────────────────────── -->
<section style="background:var(--surface);border-top:1px solid var(--border);border-bottom:1px solid var(--border);padding:80px 32px;">
  <div style="max-width:1100px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;gap:40px;flex-wrap:wrap;">
    <div>
      <p style="font-family:var(--font-mono);font-size:10px;text-transform:uppercase;letter-spacing:0.14em;color:var(--accent);margin:0 0 16px;">Online tool</p>
      <h2 style="font-family:var(--font-display);font-size:clamp(28px,4vw,48px);font-weight:800;line-height:1.15;color:var(--text);margin:0 0 16px;">
        Convert your data to INGR<br/>— and back.
      </h2>
      <p style="font-size:16px;line-height:1.65;color:var(--text-muted);margin:0;max-width:480px;">
        Paste or drop a file. The converter auto-detects your format, converts it, and lets you
        copy or download the result. Supports JSON, JSONL, CSV, TSV, YAML, XML, and INGR —
        all processed locally in your browser.
      </p>
    </div>
    <div style="display:flex;flex-direction:column;gap:12px;align-items:flex-start;">
      <a href="/converter/" class="btn-primary"
         style="text-decoration:none;display:inline-block;font-size:13px;padding:14px 28px;letter-spacing:0.1em;">
        Open Converter →
      </a>
      <a href="https://github.com/ingr-io/ingr-file-format" target="_blank" rel="noopener"
         class="btn-ghost" style="text-decoration:none;display:inline-block;">
        Read the Spec ↗
      </a>
    </div>
  </div>
</section>

<!-- ── LIBRARIES ──────────────────────────────────────────────────────────── -->
<section style="padding:80px 32px;max-width:1100px;margin:0 auto;">
  <p style="font-family:var(--font-mono);font-size:10px;text-transform:uppercase;letter-spacing:0.14em;color:var(--accent);margin:0 0 16px;">Libraries</p>
  <h2 style="font-family:var(--font-display);font-size:36px;font-weight:700;line-height:1.2;color:var(--text);margin:0 0 40px;">
    Ready-to-use in your language.
  </h2>

  <!-- Two-column layout: lib cards left, AI prompt right -->
  <div style="display:grid;grid-template-columns:280px 1fr;gap:1px;background:var(--border);align-items:stretch;">

    <!-- Left: library cards (vertical) -->
    <div style="display:flex;flex-direction:column;gap:1px;background:var(--border);">

      <a href="https://github.com/ingr-io/ingr-go" target="_blank" rel="noopener"
         class="feature-card" style="text-decoration:none;display:block;">
        <div style="font-family:var(--font-mono);font-size:10px;text-transform:uppercase;letter-spacing:0.1em;color:var(--teal);margin-bottom:8px;">Go</div>
        <div style="font-family:var(--font-mono);font-size:14px;font-weight:600;color:var(--text);margin-bottom:4px;">ingr-go</div>
        <div style="font-family:var(--font-mono);font-size:10px;color:var(--accent);margin-top:10px;">ingr-io/ingr-go ↗</div>
      </a>

      <a href="https://github.com/ingr-io/ingr-js" target="_blank" rel="noopener"
         class="feature-card" style="text-decoration:none;display:block;">
        <div style="font-family:var(--font-mono);font-size:10px;text-transform:uppercase;letter-spacing:0.1em;color:var(--teal);margin-bottom:8px;">JavaScript / TypeScript</div>
        <div style="font-family:var(--font-mono);font-size:14px;font-weight:600;color:var(--text);margin-bottom:4px;">ingr-js</div>
        <div style="font-family:var(--font-mono);font-size:10px;color:var(--accent);margin-top:10px;">ingr-io/ingr-js ↗</div>
      </a>

      <a href="https://github.com/ingr-io/ingr-py" target="_blank" rel="noopener"
         class="feature-card" style="text-decoration:none;display:block;">
        <div style="font-family:var(--font-mono);font-size:10px;text-transform:uppercase;letter-spacing:0.1em;color:var(--teal);margin-bottom:8px;">Python</div>
        <div style="font-family:var(--font-mono);font-size:14px;font-weight:600;color:var(--text);margin-bottom:4px;">ingr-py</div>
        <div style="font-family:var(--font-mono);font-size:10px;color:var(--accent);margin-top:10px;">ingr-io/ingr-py ↗</div>
      </a>

      <a href="https://github.com/ingr-io/ingr-dotnet" target="_blank" rel="noopener"
         class="feature-card" style="text-decoration:none;display:block;">
        <div style="font-family:var(--font-mono);font-size:10px;text-transform:uppercase;letter-spacing:0.1em;color:var(--teal);margin-bottom:8px;">.NET / C#</div>
        <div style="font-family:var(--font-mono);font-size:14px;font-weight:600;color:var(--text);margin-bottom:4px;">ingr-dotnet</div>
        <div style="font-family:var(--font-mono);font-size:10px;color:var(--accent);margin-top:10px;">ingr-io/ingr-dotnet ↗</div>
      </a>

    </div>

    <!-- Right: AI prompt block -->
    <div style="display:flex;flex-direction:column;background:var(--surface);">
      <div style="background:var(--surface-2);padding:20px 24px;border-bottom:1px solid var(--border);">
        <p style="font-family:var(--font-mono);font-size:10px;text-transform:uppercase;letter-spacing:0.14em;color:var(--accent);margin:0 0 8px;">Don't see your language?</p>
        <h3 style="font-family:var(--font-display);font-size:20px;font-weight:700;color:var(--text);margin:0 0 8px;">
          Generate one with AI.
        </h3>
        <p style="font-size:13px;line-height:1.6;color:var(--text-muted);margin:0;display:flex;align-items:center;flex-wrap:wrap;gap:6px;">
          Copy a prompt for
          <input id="lang-input" type="text" placeholder="YOUR LANGUAGE"
                 style="font-family:var(--font-mono);font-size:12px;background:var(--bg);border:1px solid var(--border-2);color:var(--text);padding:3px 8px;width:160px;outline:none;transition:border-color 0.15s;"
                 onfocus="this.style.borderColor='var(--accent)'"
                 onblur="this.style.borderColor='var(--border-2)'" />
          and paste it into your AI tool of choice.
        </p>
      </div>

      <!-- Prompt tabs -->
      <div id="prompt-tabs" class="format-tabs" style="background:var(--surface);">
        <button class="format-tab active" data-prompt="parser">Parser</button>
        <button class="format-tab" data-prompt="builder">Builder</button>
        <button class="format-tab" data-prompt="both">PARSER+BUILDER</button>
      </div>

      <!-- Prompt output -->
      <div style="position:relative;flex:1;">
        <pre id="prompt-output" class="code-area code-output"
             style="border:none;width:100%;height:100%;min-height:200px;color:var(--text);font-size:12px;line-height:1.7;white-space:pre-wrap;word-break:break-word;"></pre>
        <button id="copy-prompt" class="btn-ghost"
                style="position:absolute;top:12px;right:12px;font-size:10px;padding:5px 12px;display:flex;align-items:center;gap:5px;">
          <span>⎘</span> Copy
        </button>
      </div>
    </div>

  </div>

  <style>
  @media (max-width:680px) {
    #libs-grid { grid-template-columns: 1fr !important; }
  }
  </style>
</section>

<script type="module">
const SPEC_URL = 'https://raw.githubusercontent.com/ingitdb/ingitdb-cli/refs/heads/main/docs/file-formats/ingr.md'

const PROMPTS = {
  parser: `Implement an INGR file format parser in [YOUR LANGUAGE].

Specification: ${SPEC_URL}

Requirements:
- Parse the header line to extract the recordset name and ordered column list
  ($ID is the reserved primary key column — strip the $ prefix in the output map key)
- Each record spans exactly N lines where N = number of columns;
  each line contains a single JSON-encoded field value (string, number, boolean, null, object, or array)
- Skip optional '#' delimiter lines that may appear between records
- Parse the footer line ("# N record(s)") and validate the count against the number of records parsed
- Validate that (total data lines) % N === 0
- Use UTF-8 encoding and expect LF line separators
- Return a structured result: { recordsetName: string, columns: string[], records: object[] }
- Raise descriptive errors for any malformed input`,

  builder: `Implement an INGR file format builder (serializer) in [YOUR LANGUAGE].

Specification: ${SPEC_URL}

Requirements:
- Accept: recordset name (string), ordered column list (string[]), array of records (key-value maps)
- Write the header line: # INGR.io | {recordsetName}: $ID, col2, col3, ...
  (the first column must be prefixed with $ to mark it as the primary key)
- Encode each field value as a single-line JSON value — strings, numbers, booleans, null,
  objects and arrays are all valid; objects and arrays must be compacted (no embedded newlines)
- Write each record as N consecutive lines, one JSON value per line
- Accept an optional boolean flag \`delimiter\` — when true, insert a bare '#' line between
  records (but not after the last record)
- Write the footer line: # N record(s) (use "record" for N=1, "records" otherwise)
- Do NOT write a trailing newline after the final line
- Use UTF-8 encoding and LF line separators
- Raise descriptive errors for invalid input`,

  both: `Implement a complete INGR file format library in [YOUR LANGUAGE], including both a parser and a builder.

Specification: ${SPEC_URL}

--- PARSER ---
- Parse the header line to extract the recordset name and ordered column list
  ($ID is the reserved primary key column — strip the $ prefix in the output map key)
- Each record spans exactly N lines (N = column count);
  each line is a JSON-encoded field value (string, number, boolean, null, object, array)
- Skip optional '#' delimiter lines between records
- Parse and validate the footer record count
- Validate that (total data lines) % N === 0
- Return: { recordsetName: string, columns: string[], records: object[] }
- Raise descriptive errors for malformed input

--- BUILDER ---
- Accept recordset name, ordered column list, and array of records
- Write header: # INGR.io | {recordsetName}: $ID, col2, col3, ...
- Encode each field as a single-line JSON value (compact, no embedded newlines)
- Write each record as N consecutive lines
- Optional \`delimiter\` flag: insert a bare '#' line between records (not after the last)
- Write footer: # N record(s)
- No trailing newline after the final line
- UTF-8, LF line separators

Include usage examples for both parsing and building.`,
}

const tabsEl   = document.getElementById('prompt-tabs')
const outputEl = document.getElementById('prompt-output')
const copyBtn  = document.getElementById('copy-prompt')
const langInput = document.getElementById('lang-input')
let current = 'parser'

function resolvedPrompt() {
  const lang = langInput.value.trim() || '[YOUR LANGUAGE]'
  return PROMPTS[current].replaceAll('[YOUR LANGUAGE]', lang)
}

function setPrompt(key) {
  current = key
  outputEl.textContent = resolvedPrompt()
  tabsEl.querySelectorAll('.format-tab').forEach(t =>
    t.classList.toggle('active', t.dataset.prompt === key)
  )
}

tabsEl.addEventListener('click', e => {
  const btn = e.target.closest('.format-tab')
  if (btn?.dataset.prompt) setPrompt(btn.dataset.prompt)
})

langInput.addEventListener('input', () => {
  outputEl.textContent = resolvedPrompt()
})

copyBtn.addEventListener('click', async () => {
  await navigator.clipboard.writeText(resolvedPrompt())
  const orig = copyBtn.innerHTML
  copyBtn.innerHTML = '<span>✓</span> Copied'
  setTimeout(() => { copyBtn.innerHTML = orig }, 1500)
})

setPrompt('parser')
</script>

<!-- ── SPEC HIGHLIGHTS ─────────────────────────────────────────────────────── -->
<section style="padding:80px 32px;max-width:1100px;margin:0 auto;">
  <p style="font-family:var(--font-mono);font-size:10px;text-transform:uppercase;letter-spacing:0.14em;color:var(--accent);margin:0 0 16px;">Specification</p>
  <h2 style="font-family:var(--font-display);font-size:36px;font-weight:700;line-height:1.2;color:var(--text);margin:0 0 48px;">
    The rules are simple.<br/>The guarantees are strong.
  </h2>
  <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:32px;">
    <div>
      <p style="font-family:var(--font-mono);font-size:11px;text-transform:uppercase;letter-spacing:0.08em;color:var(--teal);margin:0 0 12px;">Encoding</p>
      <ul style="font-size:14px;line-height:1.8;color:var(--text-muted);padding-left:20px;margin:0;">
        <li>UTF-8 with LF line endings</li>
        <li>All values are valid single-line JSON</li>
        <li>No trailing newline on the final line</li>
      </ul>
    </div>
    <div>
      <p style="font-family:var(--font-mono);font-size:11px;text-transform:uppercase;letter-spacing:0.08em;color:var(--teal);margin:0 0 12px;">Structure</p>
      <ul style="font-size:14px;line-height:1.8;color:var(--text-muted);padding-left:20px;margin:0;">
        <li>Header → Records → Footer</li>
        <li><code style="font-family:var(--font-mono);">$ID</code> is the reserved primary key column</li>
        <li>Optional <code style="font-family:var(--font-mono);">#</code> delimiters between records</li>
      </ul>
    </div>
    <div>
      <p style="font-family:var(--font-mono);font-size:11px;text-transform:uppercase;letter-spacing:0.08em;color:var(--teal);margin:0 0 12px;">Validation</p>
      <ul style="font-size:14px;line-height:1.8;color:var(--text-muted);padding-left:20px;margin:0;">
        <li>Footer records count is machine-verifiable</li>
        <li><code style="font-family:var(--font-mono);">(data_lines % N) === 0</code></li>
        <li>Optional hash digest for integrity checks</li>
      </ul>
    </div>
  </div>
  <div style="margin-top:48px;padding-top:32px;border-top:1px solid var(--border);">
    <a href="https://github.com/ingr-io/ingr-file-format" target="_blank" rel="noopener"
       style="font-family:var(--font-mono);font-size:12px;text-transform:uppercase;letter-spacing:0.08em;color:var(--accent);text-decoration:none;">
      Full specification on GitHub ↗
    </a>
  </div>
</section>

<!-- ── FOOTER ──────────────────────────────────────────────────────────────── -->
<footer style="border-top:1px solid var(--border);padding:24px 32px;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:16px;">
  <span style="font-family:var(--font-mono);font-size:11px;color:var(--text-subtle);">INGR File Format</span>
  <div style="display:flex;gap:24px;">
    <a href="https://github.com/ingr-io/ingr-file-format" target="_blank" rel="noopener"
       style="font-family:var(--font-mono);font-size:11px;color:var(--text-subtle);text-decoration:none;"
       onmouseover="this.style.color='var(--text-muted)'" onmouseout="this.style.color='var(--text-subtle)'">Spec</a>
    <a href="/converter/"
       style="font-family:var(--font-mono);font-size:11px;color:var(--text-subtle);text-decoration:none;"
       onmouseover="this.style.color='var(--text-muted)'" onmouseout="this.style.color='var(--text-subtle)'">Converter</a>
  </div>
</footer>

</body>
</html>
